# Frontend tooling

## What's required

To install Node.js on the host machine you could use tools like [fnm](https://github.com/Schniz/fnm), [`volta`](https://volta.sh/) and so on. Once you have Node.js 18 installed simply run `npm install` in the project root to install the dependencies.

## Starting afresh

The _{{ cookiecutter.project_name }}_ frontend tooling is versioned via `package.json`, and the `package-lock.json` lockfile pins all of the project’s direct and transitive dependencies. If you wish to start the project with up to date dependencies without doing manual upgrades, you can discard the lockfile and re-create it:

```sh
rm -rf node_modules
rm package-lock.json
npm install
```

Remember to then commit the updated `package-lock.json`.

## What's included

- [Sass](http://sass-lang.com/) CSS with [auto-prefixing](https://github.com/postcss/autoprefixer).
- [webpack-dev-server](https://github.com/webpack/webpack-dev-server) for live reloading.
- [Webpack](https://webpack.js.org/) for module bundling.
  - With `babel-loader` to process JavaScript.
  - With `css-loader`, `postcss-loader`, and `sass-loader` to process stylesheets.
- Consideration for images, currently copying the directory only - to avoid slowdowns and non-essential dependencies. It is recommended to use SVG for UI vectors and pre-optimised UI photograph assets.
- [Build commands](#build-scripts) for generating testable or deployable assets only
- CSS linting with `stylelint`
- JS linting with `eslint`
- Code formatting with [Prettier](https://prettier.io/)

## Development

- The development environment is executed via:

  ```bash
  npm run dev:reload # (1)!
  ```

  1. Note that this is automatically executed when you run `inv start` in the `web` container. For details, see `docker/Procfile`.

- Source files for developing your project are in `assets` and the distribution folder for the compiled assets is `static`. Don't make direct changes to the `static` directory as they will be overwritten.

## Deployment

### Build scripts

To only build assets for either development or production you can use

- `npm run build` To build development assets
- `npm run build:prod` To build assets with minification and vendor prefixes

## Further details of key packages included

### Dependencies

- [bootstrap 5](https://getbootstrap.com/docs/5.3/getting-started/introduction/) – Powerful, extensible, and feature-packed frontend toolkit.

### Development Dependencies

- **autoprefixer** - adds vendor prefixes as necessary for the browsers defined in `browserslist` in the npm config https://www.npmjs.com/package/autoprefixer
- **babel-loader** - transpile JavaScript files using Babel and webpack - https://github.com/babel/babel-loader
- **copy-webpack-plugin** - Used to sync images from `assets` to `static`
- **css-loader** – add support for Webpack to load stylesheets.
- **cssnano** – minify CSS with safe optimisations - https://cssnano.co/.
- **eslint** - lint your javascript https://www.npmjs.com/package/eslint
- **eslint-config-prettier** - Turns off all rules that are unnecessary or might conflict with [Prettier](https://github.com/prettier/prettier) - https://github.com/prettier/eslint-config-prettier
- **eslint-plugin-prettier** - ESLint plugin for Prettier formatting - https://github.com/prettier/eslint-plugin-prettier
- **mini-css-extract-plugin** - extract CSS generated by Webpack into separate files.
- **mjml** - a framework that simplifies responsive-email - https://github.com/mjmlio/mjml
- **postcss-loader** - integrate PostCSS preprocessing into Webpack’s styles loading.
- **postcss-custom-properties** - polyfill for CSS custom properties - https://www.npmjs.com/package/postcss-custom-properties
- **stylelint** - Linting for styles - https://stylelint.io
- **stylelint-config-standard-scss** - The standard shareable SCSS config for Stylelint - https://www.npmjs.com/package/stylelint-config-standard-scss
- **sass-loader** - integrate Sass preprocessing into Webpack’s styles loading.
- **webpack** - Bundler for js files (can do much more too) - https://www.npmjs.com/package/webpack https://webpack.js.org/concepts/
- **webpack-cli** - Provides a set of tools to improve the setup of custom webpack configuration - https://www.npmjs.com/package/webpack-cli
